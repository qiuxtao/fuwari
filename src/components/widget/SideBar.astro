---
import type { MarkdownHeading } from "astro";
import Categories from "./Categories.astro";
import Profile from "./Profile.astro";
import Tag from "./Tags.astro";
import TOC from "./TOC.astro";

interface Props {
	class?: string;
	headings?: MarkdownHeading[];
}

const { class: className, headings } = Astro.props;
const isPost = headings && headings.length > 0;
---
<div id="sidebar" class:list={[className, "w-full flex flex-col gap-4"]}>
    
    <div id="sidebar-profile" class="flex flex-col w-full gap-4" style={isPost ? "display: none;" : ""}>
        <Profile></Profile>
    </div>

    <div id="sidebar-sticky" class="transition-all duration-700 flex flex-col w-full gap-4 top-4 sticky top-4">
        
        <div class="card-base pb-4 toc-card" style={isPost ? "" : "display: none;"}>
            <div class="font-bold transition text-lg text-neutral-900 dark:text-neutral-100 relative ml-8 mt-4 mb-2
                before:w-1 before:h-4 before:rounded-md before:bg-[var(--primary)]
                before:absolute before:left-[-16px] before:top-[5.5px]">
                目录
            </div>
           
            <div class="w-full px-4">
                <TOC headings={headings} />
            </div>
        </div>

        <div id="sidebar-widgets" class="flex flex-col gap-4" style={isPost ? "display: none;" : ""}>
            <Categories class="onload-animation" style="animation-delay: 200ms"></Categories>
            <Tag class="onload-animation" style="animation-delay: 250ms"></Tag>
        </div>
    </div>
</div>